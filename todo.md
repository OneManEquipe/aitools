
- [ ]. persistence
    - [ ]. refactor AbstruseIndex
        - [x] refactor key_function
            - [x] refactor key_function as an injected dependency
            - [x] refactor key_function so that it is called once and returns the whole key
            - [x] refactor key_function so that the key is passed from outside
        - [x] refactor AbstruseIndex so that it is generic (no dependency on logic package)
            - [x] remove Variable as a wildcard in keys
            - [x] set logging level to WARNING in tests
            - [x] remove references to "formula" from the index
            - [x] make _ListKeyIndex a Trie
            - [x] make AbstruseIndex generic (apparently it was already)
            - [x] restructure modules
        - [x] refactor AbstruseIndex to make it more abstract
            - [x] make a DummyAbstruseIndex subclass and use that wherever needed
            - [x] make other subclasses for all other "implementations"
            - [x] remove container classes from the AbstruseIndex and pass them from the superclass constructors
            - [x] add an "add_object" method to AbstruseIndex
            - [x] repeat the same for TrieIndex
                - [x] make subclasses
                - [x] remove container class inputs
            - [x] make AbstruseIndex and TrieIndex abstract
            - [x] add a "make_node" abstract method to AbstruseIndex
            - [x] add a "make_node" abstract method to TrieIndex
            - [x] remove level field from AbstruseIndex
            - [x] remove "add_object" methods (because I can't make my mind up :P)
                - [x] from AbstruseIndex
                - [x] from TrieIndex
        - [ ]. refactor KnowledgeBases to use a storage
            - [x] define the Storage interface
            - [x] add dummy implementations
                - [x] set-based
                - [x] inmem serializing (new)
                - [x] DummyAbstruseIndex-based
                - [no] zodb
                - [no] indexed zodb
                - [x] inmem indexed serializing (also new)
            - [x] add tests
                - [x] reintroduce the "preserves-identity" thingie
            - [x] remove zodb
            - [x] refactor storage to yield both the object and the substitution
            - [x] refactor knowledge base to receive a storage (so only one knowledge base class will exist)
                - [x] create a common flexible KnowledgeBase class
                - [x] change test fixtures so that they use the new class
                - [x] remove all other KnowledgeBase classes
            - [ ] add a storage also for provers and listeners
                - [ ] provers
                - [ ] listeners
            - [ ] refactor KnowledgeBase to use also those storages
    - [ ] implement persistence
    - [ ] cleanup
        - [ ] remove xfailing case from `tests.proofs.conftest.TestKnowledgeBase`